<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>throttler</title>
</head>
<body>
<script>
    // 关于节流的一个汇总吧

    // 首先是对于函数使用的节流
    var throttle = function () {
        var isClear = arguments[0], fn;
        if (typeof isClear === 'boolean') {
            fn = arguments[1];
            fn.__throttleID && clearTimeout(fn.__throttleID)
        } else {
            fn = isClear;
            params = arguments[1];
            var p = Object.assign({
                context: null,
                args: [],
                time: 300,
            }, params);

            arguments.callee(true, fn);

            fn.__throttleID = setTimeout(function () {
                fn.apply(p.context, p.args)
            }, p.time)
        }
    }

    function resizeCallBack(ev) {
        console.log('resize cb', ev)
    }

    window.addEventListener('resize', function (ev) {
        throttle(resizeCallBack, {args: [ev], time: 500})
        // resizeCallBack(ev)
    })

    // 这是最简单的节流函数
    // 后面是交互节流 和图片节流

</script>
</body>
</html>
